# λ³΄μ• κ°μ„ μ‚¬ν•­

## π”’ κµ¬ν„λ λ³΄μ• κ°μ„ μ‚¬ν•­

### 1. λΉ„λ°€λ²νΈ ν•΄μ‹± μ„λ²„ μ‚¬μ΄λ“ μ΄λ™
- **μ΄μ „**: ν΄λΌμ΄μ–ΈνΈμ—μ„ `bcrypt.hash()` μ‹¤ν–‰
- **κ°μ„ **: μ„λ²„ μ‚¬μ΄λ“μ—μ„ ν•΄μ‹± μ²λ¦¬
- **νμΌ**: `supabase/functions/create-setup/index.ts`, `components/UploadModal.tsx`
- **λ³΄μ• ν¨κ³Ό**: ν•΄μ‹± μ•κ³ λ¦¬μ¦κ³Ό ν•΄μ‹λ λΉ„λ°€λ²νΈκ°€ ν΄λΌμ΄μ–ΈνΈμ— λ…Έμ¶λμ§€ μ•μ

### 2. CORS μ„¤μ • μ ν•
- **μ΄μ „**: `'Access-Control-Allow-Origin': '*'`
- **κ°μ„ **: `'Access-Control-Allow-Origin': 'https://workswith.vercel.app'`
- **νμΌ**: `supabase/functions/create-setup/index.ts`
- **λ³΄μ• ν¨κ³Ό**: ν—κ°€λ λ„λ©”μΈμ—μ„λ§ API νΈμ¶ κ°€λ¥

### 3. μ—λ¬ λ©”μ‹μ§€ μΌλ°ν™”
- **μ΄μ „**: μƒμ„Έν• μ—λ¬ λ©”μ‹μ§€ λ…Έμ¶
- **κ°μ„ **: μΌλ°ν™”λ μ—λ¬ λ©”μ‹μ§€ μ‚¬μ©
- **νμΌ**: `components/UploadModal.tsx`
- **λ³΄μ• ν¨κ³Ό**: μ‹μ¤ν… μ •λ³΄ λ…Έμ¶ λ°©μ§€

### 4. localStorage λ³΄μ• κ°•ν™”
- **μ΄μ „**: μ§μ ‘μ μΈ localStorage μ ‘κ·Ό
- **κ°μ„ **: μ•μ „ν• λνΌ ν•¨μ μ‚¬μ©
- **νμΌ**: `app/combinations/page.tsx`, `components/InitialLoading.tsx`
- **λ³΄μ• ν¨κ³Ό**: XSS κ³µκ²©μΌλ΅λ¶€ν„° λ³΄νΈ

### 5. ν™κ²½ λ³€μ κ²€μ¦ κ°•ν™”
- **μ΄μ „**: κΈ°λ³Έκ°’μΌλ΅ fallback
- **κ°μ„ **: ν”„λ΅λ•μ…μ—μ„ μ—„κ²©ν• κ²€μ¦
- **νμΌ**: `lib/supabase.ts`
- **λ³΄μ• ν¨κ³Ό**: μλ»λ μ„¤μ •μΌλ΅ μΈν• λ³΄μ• μ„ν— λ°©μ§€

### 6. λ³΄μ• ν—¤λ” μ¶”κ°€
- **μ¶”κ°€λ ν—¤λ”**:
  - `X-Frame-Options: DENY` - ν΄λ¦­μ¬ν‚Ή λ°©μ§€
  - `X-Content-Type-Options: nosniff` - MIME νƒ€μ… μ¤λ‹ν•‘ λ°©μ§€
  - `Referrer-Policy: origin-when-cross-origin` - λ¦¬νΌλ¬ μ •λ³΄ μ ν•
  - `X-XSS-Protection: 1; mode=block` - XSS λ°©μ§€
  - `Strict-Transport-Security` - HTTPS κ°•μ 
  - `Content-Security-Policy` - CSP μ •μ±… μ μ©
- **νμΌ**: `next.config.js`

### 7. λ¶ν•„μ”ν• μμ΅΄μ„± μ κ±°
- **μ κ±°**: `bcryptjs`, `@types/bcryptjs`
- **μ΄μ **: ν΄λΌμ΄μ–ΈνΈ μ‚¬μ΄λ“ ν•΄μ‹± μ κ±°λ΅ μΈν•΄ λ¶ν•„μ”
- **λ³΄μ• ν¨κ³Ό**: κ³µκ²© ν‘λ©΄ κ°μ†

## π›΅οΈ ν„μ¬ λ³΄μ• μƒνƒ

### κ°•μ 
- β… Supabase RLS (Row Level Security) ν™μ„±ν™”
- β… νλΌλ―Έν„°ν™”λ μΏΌλ¦¬ μ‚¬μ© (SQL Injection λ°©μ§€)
- β… HTTPS κ°•μ  μ μ©
- β… μ„λ²„ μ‚¬μ΄λ“ λΉ„λ°€λ²νΈ ν•΄μ‹±
- β… μ ν•λ CORS μ„¤μ •
- β… λ³΄μ• ν—¤λ” μ μ©
- β… ν™κ²½ λ³€μ κ²€μ¦

### λ¨λ‹ν„°λ§ ν•„μ” μ‚¬ν•­
- π” Supabase λ΅κ·Έ λ¨λ‹ν„°λ§
- π” μ—λ¬ λ΅κ·Έ λ¶„μ„
- π” λΉ„μ •μƒμ μΈ API νΈμ¶ ν¨ν„΄ κ°μ§€

## π“‹ λ³΄μ• μ²΄ν¬λ¦¬μ¤νΈ

- [x] SQL Injection λ°©μ§€
- [x] XSS λ°©μ§€
- [x] CSRF λ°©μ§€
- [x] ν΄λ¦­μ¬ν‚Ή λ°©μ§€
- [x] λΉ„λ°€λ²νΈ μ•μ „ν• μ €μ¥
- [x] ν™κ²½ λ³€μ λ³΄μ•
- [x] CORS μ„¤μ •
- [x] λ³΄μ• ν—¤λ” μ μ©
- [x] μ—λ¬ λ©”μ‹μ§€ μΌλ°ν™”
- [x] localStorage λ³΄μ•

## π€ λ°°ν¬ μ‹ μ£Όμμ‚¬ν•­

1. **ν™κ²½ λ³€μ μ„¤μ • ν™•μΈ**
   ```bash
   NEXT_PUBLIC_SUPABASE_URL=your_supabase_url
   NEXT_PUBLIC_SUPABASE_ANON_KEY=your_supabase_anon_key
   ```

2. **Supabase Edge Functions λ°°ν¬**
   ```bash
   supabase functions deploy create-setup
   ```

3. **λ³΄μ• ν—¤λ” ν™•μΈ**
   - λ°°ν¬ ν›„ λΈλΌμ°μ € κ°λ°μ λ„κµ¬μ—μ„ ν—¤λ” ν™•μΈ

4. **CORS μ„¤μ • ν™•μΈ**
   - μ‹¤μ  λ„λ©”μΈμΌλ΅ CORS μ„¤μ • μ—…λ°μ΄νΈ ν•„μ”

## π”„ μ •κΈ° λ³΄μ• μ κ²€

- μ›” 1ν: μμ΅΄μ„± λ³΄μ• μ—…λ°μ΄νΈ ν™•μΈ
- λ¶„κΈ° 1ν: λ³΄μ• ν—¤λ” λ° μ„¤μ • κ²€ν† 
- μ—° 1ν: μ „μ²΄ λ³΄μ• μ•„ν‚¤ν…μ² κ²€ν†  